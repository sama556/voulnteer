(self.modernJsonp=self.modernJsonp||[]).push([["61239"],{915493:function(e,n,a){a.d(n,{Z:()=>i});var t=a(781011),o=a(603316);function i(e,n,a,i,l){let s=new URLSearchParams,r=n.reduce((e,n)=>{if(null!=n){let a=function(e){let n;try{n=decodeURIComponent(e)}catch(a){n=e}n.startsWith("http")?n.startsWith("http://")&&(n=n.replace("http://","https://")):n="https://"+n;try{return new URL(n).origin}catch(t){let a=n.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(a&&a.length>1)return a[1];return e}}(n);return e.add(a)}return e},new Set);s.append(t.NR.SOURCE_EVENT_ID,e??"0"),s.append(t.NR.DESTINATION,JSON.stringify([...r])),s.append(t.NR.EXPIRY,a?t.uV:t.ug),s.append(t.NR.PRIORITY,a?t.NR.CLICK_PRIORITY:t.NR.VIEW_PRIORITY),l&&s.append(t.NR.ADVERTISER_ID,l),i&&s.append(t.NR.CAMPAIGN_ID,i),s.append(t.NR.SOURCE_EVENT_TYPE,a?t.bC:t.Cu);try{let{hostname:e}=new URL(window.location.href);"www.pinterest.com"!==e&&s.append(t.NR.HOSTNAME,e)}catch(e){(0,o.nP)("webapp.arapi.generateARASourceEventURL",{sampleRate:.1,tags:{status:"failed",href:window&&window.location&&window.location.href}})}return"https://www.pinterest.com/attribution_source/?"+s.toString()}},716022:function(e,n,a){a.d(n,{$K:()=>l,dh:()=>t,ry:()=>o,xX:()=>s});let t=e=>/instagram/i.test(e||""),o=e=>t(e)||/facebook/i.test(e||"")||/line/i.test(e||"")||/wechat/i.test(e||""),i="[Pinterest/Android]",l=e=>(e||"").includes("[Pinterest/iOS]")||(e||"").includes(i),s=e=>(e||"").includes(i)},947543:function(e,n,a){a.d(n,{Z:()=>o});var t=a(675973);function o(e){let{expName:n,anyEnabled:a,group:o}=function({experimentsClient:e,skipActivation:n}){let{checkExperiment:a}=e,t=a("web_masonry_v2",{dangerouslySkipActivation:n});return t.group?{expName:"web_masonry_v2",...t}:{expName:"",anyEnabled:!1,group:""}}({experimentsClient:(0,t.Z)(),skipActivation:e?.skipActivation??!1});return{expName:n,anyEnabled:a,group:o,isMeasureAllEnabled:"enabled_measure_all"===o||"enabled_measure_all_impression_fix"===o,isImpressionFixEnabled:"control_impression_fix"===o||"enabled_impression_fix"===o||"enabled_measure_all_impression_fix"===o}}},351607:function(e,n,a){a.d(n,{OC:()=>b,Fw:()=>L,ZP:()=>I});var t=a(667294),o=a(915493),i=a(657043),l=a(603316);async function s(e,n,a,t,s,r,d,u,p){let _,{appType:c,osType:m}=r||{},g="",S="";if(["Pin","pinImpressions"].includes(e)&&n&&(t||u||p)){(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:c,osType:m}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting"))return void(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:c,osType:m}});g=(0,o.Z)(a,[t,u,p],!1,s,d);try{S=new URL(window.location.href).hostname}catch(e){(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"hostname_parse_failed",href:window&&window.location&&window.location.href}})}if(S&&"www.pinterest.com"!==S)document.createElement("img").setAttribute("attributionsrc",g),(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"international",appType:c,osType:m,hostname:S}});else if(!(_=await window.fetch(g,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}})).ok)throw Error("server request failed.");(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:c,osType:m}})}catch(e){(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:(0,i.Z)(e,"name"),message:(0,i.Z)(e,"message"),appType:c,osType:m,hostname:S,responseStatus:_&&_.status}})}}else(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:c,osType:m}})}var r=a(293565),d=a(980787),u=a(947543),p=a(816358),_=a(675973),c=a(15667),m=a(647709),g=a(792171),S=a(370347),h=a(183152);let w=0,b=()=>w,y={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},v=({events:e,startTime:n,endTime:a})=>e?.filter(e=>e>=n&&e<=a)||[];function I({carouselData:e,closeupImpressionType:n,closeupNavigationType:a,componentType:o,contextLogData:i,clientTrackingParams:b,duploShouldTrackPinEvents:I,elementType:L,impressionAuxFields:E,inImpressionExp:O,impressionType:C,impressionsFramework:T,isPaused:P,loggingId:N,objectIdStr:f,slotIndex:U,trackCarousel:M,viewData:R,viewParameter:k,viewType:x,isPromoted:A,storyPinProductEventData:G}){let{logContextEvent:D}=(0,d.u)(),{logMrcVideoAdEventOnPlay:F}=(0,g.H)(),{checkExperiment:B}=(0,_.Z)(),{userAgent:{browserName:W}}=(0,c.B)(),{logStat:H}=(0,S.Yg)(),q=T||p.Z,$=(0,t.useRef)(null),V=(0,t.useRef)(e=>{});V.current=t=>{let l=y[C],d=l.idType,u={clientTrackingParams:b,endTime:t.endTime,[d]:N,slotIndex:U,time:t.startTime,renderDuration:t.endTime-t.startTime,type:n,...E,forcedExit:"removed"===t.forcedExit?0:void 0};if("Pin"===C){w+=1;let e=[],n=t.visibleEvents||new Map,a=t.hiddenEvents||new Map;(E&&E.isPromoted||A)&&[1,50,80,2,102].forEach(o=>{let i=v({events:n.get(o),startTime:t.startTime,endTime:t.endTime}),l=v({events:a.get(o),startTime:t.startTime,endTime:t.endTime});i.forEach(n=>{e.push({type:o,time:n||0,visible:!0})}),l.forEach(n=>{e.push({type:o,time:n||0,visible:!1})})}),u={...u,pinCellWidth:t.pinCellWidth||0,pinCellHeight:t.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,n)=>e.time-n.time)};let o=B("aid_exp_ara_shutdown_source_registration").anyEnabled;if((0,r.i7)(W)&&E&&E.isPromoted&&!o){let{attributionSourceId:e,isPromoted:n,link:a,campaignId:t,araAuxData:o,advertiserId:i,domain:l,adDestinationUrl:r}=E;s(C,n??null,e??null,a??null,t??null,o??null,i??null,l??null,r??null)}}let p={component:o,object_id_str:f,view_type:x,view_data:R||{},view_parameter:k};if(M)e&&M&&D({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...u,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...p,aux_data:{...i}});else{let e={clientTrackingParams:b,event_type:l.eventType,...p,element:L,event_data:{[l.impressionType]:"Story"===C?u:[u],...G?{storyPinProductEventData:G}:{}},aux_data:{closeup_navigation_type:a,...i}};D(e),F(e)}I&&H("log_pin_impression")};let{expName:K,group:Z}=(0,u.Z)({skipActivation:!0}),Q=(0,m.ZP)(),Y=(0,h.Zv)(),{isAuthenticated:X}=(0,c.B)(),j=(0,t.useCallback)(()=>{let e=!1;try{let{current:n}=$;if(n instanceof HTMLElement&&(!A||n.getElementsByTagName("img").length>0)){let a=q.start(n);a.onExitViewport(V.current).setDebugId(N||"unknown"),I&&a.onEnterViewport(()=>{H("log_pin_impression_track_enter_viewport")}),e=!0,Z&&(0,l.nP)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:Q,experimentName:K,group:Z,handlerId:Y,isAuthenticated:X,slotIndex:U??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}I&&H("log_pin_impression_track",{didStartTracking:e})},[$.current]);return(0,t.useEffect)(()=>(O&&!q.inExperiment&&q.setExperimentStatus(!0),P||j(),()=>{let{current:e}=$;e instanceof HTMLElement&&(!A||e.getElementsByTagName("img").length>0)&&q.stop(e)}),[P,j]),$}let L=({children:e,...n})=>e({impressionTrackerRef:I(n)})},469978:function(e,n,a){a.d(n,{J:()=>i,U:()=>g});var t=a(575108),o=a(603316);let i="nic_v4",l=`${i}=1a`,s=`${i}=1b`,r=[l,s],d=["invite_code","invite","board_invite_code","sender"],u=null,p=e=>!!d.find(n=>e.includes(n)),_=e=>{let n;return e.pathname.includes("/pin/")&&!p(e.search)&&(n=e.search,!r.find(e=>n.includes(e)))},c=async e=>{let{resource_response:n}=await t.Z.create("InviteSocialTrackingParamNonInviteResource",{user_id:e}).callCreate();if(!n)return(0,o.nP)(`${i}.social_tracking_pin_non_invite.no_resource_response`),"";{let e=encodeURIComponent(n.data);return(0,o.nP)(`${i}.social_tracking_pin_non_invite.encrypted.${e?"true":"false"}`),e}},m=(e,n,a=!1,t)=>{if(!_(e))return;let r=a?"mweb":"web";if(!n)return void(0,o.nP)(`${r}.${i}.social_tracking_pin_non_invite.insert.no_encrypted_id`);(0,o.nP)(`${r}.${i}.social_tracking_pin_non_invite.insert.attempt`);try{let d=((e,n,a)=>{let t=e.search?"&":"?";return e.pathname+e.search+(t+(a?s:l)+n)})(e,n,a||!1);(0,o.nP)(`${r}.${i}.social_tracking_pin_non_invite.insert.success`),t(d)}catch{(0,o.nP)(`${r}.${i}.social_tracking_pin_non_invite.insert.caught_exception`)}},g=(e,n,a,t,l)=>{let s=a?"mweb":"web";(0,o.nP)(`${s}.${i}.social_tracking_pin_non_invite.attempt`);try{let r;!a&&t&&_(e)?((0,o.nP)(`${s}.${i}.social_tracking_pin_non_invite.search_string_eligible`),((e,n,a=!1,t)=>{u?m(e,u,a,t):(async()=>{let o=await c(n);u=o,m(e,o,a,t)})()})(e,n,a,l)):(r=e.search,!p(r)&&!r.includes("sender")&&r.includes(i)&&(0,o.nP)(`${s}.${i}.social_tracking_pin_non_invite.search_string_land`))}catch{(0,o.nP)(`${s}.${i}.social_tracking_pin_non_invite.caught_exception`)}}},527728:function(e,n,a){a.d(n,{Z:()=>p});var t=a(312048),o=a(469978),i=a(506662),l=a(15667),s=a(822279),r=a(152615),d=a(664897),u=a(603316);function p(){let e,{isBot:n,isSocialBot:a,referrerFromCookie:p,referrerFromHeader:_,countryFromHostName:c,countryFromIp:m,regionFromIp:g,isAuthenticated:S}=(0,l.B)(),h=(0,t.TH)(),w=(0,d.Z)(),b=new URLSearchParams(h.search),y=!n&&!!b.get("utm_pai"),v=b.get("utm_source"),I=!n&&!a&&(0,i.ey)(h),L=(0,r.Z)({countryFromHostName:c||"",countryFromIp:m||"",regionFromIp:g||"",isAuthenticated:S}),E=_||L&&p||"";e=w||!L?E:(0,s.an)(E);let O=!1,C=!n&&!a&&v&&["email",String(31)].includes(v),T=!n&&!a&&v&&["fb"].includes(v),P="offsite"===v,N=!n&&!a&&!!(e&&(/facebook/.test(e)||/fb/.test(e))),f=!n&&!a&&!!(e&&(/twitter/.test(e)||/tw/.test(e)));I&&(0,u.nP)("unauth.entry_channel.invite_code",{sampleRate:1}),C&&(0,u.nP)("unauth.entry_channel.email_utm_source",{sampleRate:1}),T&&(0,u.nP)("unauth.entry_channel.social_media_utm_source_fb",{sampleRate:1}),P&&(0,u.nP)("unauth.entry_channel.offsite_utm_source",{sampleRate:1}),N&&(0,u.nP)("unauth.entry_channel.social_media_referer_fb",{sampleRate:1}),f&&(0,u.nP)("unauth.entry_channel.social_media_referer_twitter",{sampleRate:1}),O=(0,s.Xn)(e);let U=!n&&O,M=!!b.get(o.J),R=!!b.get("twa_type")||e&&e.startsWith("android-app://com.pinterest.twa"),k=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_admin","utm_id","utm_mail","utm_swu"].some(e=>null!==b.get(e))||!!e||M||R;return{isPaid:y,isInvite:I,utmSource:v,referrer:e,isSocial:I,isDirect:!n&&!y&&!I&&!U&&!k,isSEO:U,isBrowserStorageAllowed:L,isOffsite:P,isBot:n||a}}},822279:function(e,n,a){a.d(n,{Xn:()=>g,Yf:()=>b,an:()=>S});var t=a(506662),o=a(579275),i=a(378888);let l="BING",s="GOOGLE",r="YAHOO",d="YANDEX",u="RAKUTEN",p="NAVER",_="AMP_CACHE",c="DUCKDUCKGO",m=[s,l,r,d,u,p,_,c];function g(e){return m.includes(function(e){let{hostname:n}=(0,i.Qc)(e,!0);if(n&&e){if(n.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return s;else if(n.includes("bing."))return l;else if(n.includes("yahoo."))return r;else if(n.includes("yandex."))return d;else if(n.includes("rakuten."))return u;else if(n.includes("naver."))return p;else if(n.includes("duckduckgo."))return c;else if(n.includes(".cdn.ampproject.org"))return _}return""}(e))}function S(e){return e||"undefined"!=typeof document&&document.referrer||""}let h=e=>"/"!==e[e.length-1]?`${e}/`:e,w=e=>{let n=h(e),a=(0,t.ll)({url:n});return(0,t.L6)(a)?"PIN":(0,t.am)(a)?"BOARD":(0,o.Z)(a)?"PROFILE":(0,t.bo)(a)?"TODAY":(0,t.z_)(a)?"IDEA":(0,t.R$)(a)?"SHOPPING":"UNKNOWN"},b=({country:e,language:n,isBot:a,hostname:t,pathname:o})=>({domain:t,country:e,language:n,currentUrl:o,pageType:w(o),referrer:document.referrer,isBot:a,links:(({selector:e,skipExternal:n})=>{let a=Array.from(document.querySelectorAll(e)),t={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},o=new Set;return a.forEach(e=>{let a=e.getAttribute("href");if(!a||a.startsWith("#")||n&&a.startsWith("http")&&!a.includes(window.location.hostname))return;let i=h(a);if(o.has(i))return;o.add(i);let l=w(i);"PIN"===l?t.pin.push(i):"BOARD"===l?t.board.push(i):"PROFILE"===l?t.user.push(i):"TODAY"===l?t.today.push(i):"IDEA"===l?t.idea.push(i):"SHOPPING"===l&&t.shopping.push(i)}),t})({selector:"a[href]",skipExternal:!0})})},838135:function(e,n,a){a.d(n,{HZ:()=>h,ZP:()=>P,e_:()=>T,pT:()=>I});var t=a(667294),o=a(581722),i=a(121836),l=a(716022),s=a(351607),r=a(527728),d=a(15667),u=a(238589),p=a(994174),_=a(647709),c=a(113850),m=a(603316);let g=Date.now(),S=()=>(0,o.v9)(e=>e.upsell?.mWebSignupModal.modal.isShown??!1),h=()=>(0,o.v9)(e=>e.upsell?.modal),w=()=>(0,s.OC)(),b=()=>Date.now()-g,y=()=>(0,o.v9)(e=>e.upsell?.mWebSignupModal.isUnauthSharingModalsShown??!1),v=()=>(0,o.v9)(e=>!!e.upsell?.mWebSignupModal.modalHasShown),I=()=>(0,o.v9)(e=>e.upsell?.mWebSignupModal),L=()=>{let e=(0,d.B)(),n=(0,r.Z)(),a=(0,_.ZP)();return(0,t.useMemo)(()=>(0,p.T9)(e,n,a),[e,n,a])},E=Object.freeze(["CO","ID"]),O=e=>E.includes(e),C=e=>{if(!(0,l.dh)(e))return!1;let n=(0,u.Nl)();return n.getItem(i.QV)||((0,m.nP)("mobile_signup_modal.rules.suppress_for_instagram_in_app_browser"),n.setItem(i.QV,"1")),!0},T=({isModalShown:e,isUnauthSharingModalsShown:n,modalHasShown:a,country:t,userAgent:o})=>!e&&!(n||a&&O(t)||(0,c.P)()||C(o));function P(){let e=S(),n=(0,o.v9)(e=>e.upsell?.mWebSignupModal.modal),a=(0,o.v9)(e=>e.upsell?.mWebSignupModal.upsellEligibleNavigationCount),i=y();return{isModalShown:e,modal:n,upsellEligibleNavigationCount:a,isUnauthSharingModalsShown:i,modalHasShown:v(),sessionContext:L(),isUpsellEnabledGlobally:(()=>{let e=S(),n=y(),a=v(),o=L();return(0,t.useCallback)(()=>!e&&!(({isUnauthSharingModalsShown:e,modalHasShown:n,sessionContext:a})=>{if(!a)return!1;let{country:t,userAgent:o}=a;return e||n&&O(t)||(0,c.P)()||C(o)})({isUnauthSharingModalsShown:n,modalHasShown:a,sessionContext:o}),[e,n,a,o])})(),getPinImpressionCount:w,getSessionDuration:b}}},209644:function(e,n,a){a.d(n,{ZW:()=>S,Gk:()=>g,YM:()=>h});var t=a(506662),o=a(579275),i=a(991384);let l="dweb_eoq_q3_standard",s="dweb_eoq_q3_advanced",r="mweb_eoq_q3_standard",d="mweb_eoq_q3_advanced",u=[{bundleId:"dweb_eoq_q3_standard",experimentKey:l,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}}},{bundleId:"dweb_eoq_q3_advanced",experimentKey:s,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{modal:{displayProps:{signupFlow:{type:"login"}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}}},{bundleId:"mweb_eoq_q3_standard",experimentKey:r,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}}},{bundleId:"mweb_eoq_q3_advanced",experimentKey:d,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}}];function p(e,n){let a=u.filter(a=>{if(!a.active||!a.overrides[e])return!1;switch(a.experimentKey){case l:return n("dweb_eoq_q3_standard").anyEnabled;case s:return n("dweb_eoq_q3_advanced").anyEnabled;case r:return n("mweb_eoq_q3_standard").anyEnabled;case d:return n("mweb_eoq_q3_advanced").anyEnabled;default:return!1}});return a[a.length-1]?.overrides[e]}let _=e=>({id:e.id,evaluate:function({ruleId:e,baseEvaluateFunction:n}){return a=>{let{checkExperiment:t,session:o}=a,l=t&&p(e,t)?.evaluateContextOverride||{},s=l[o?.channel??"default"]||l.default||{};return n((0,i.Z)(a,s))}}({ruleId:e.id,baseEvaluateFunction:e.evaluate}),getNextState:function({ruleId:e,baseNextStateFunction:n}){return({action:a,state:t,decision:o})=>{let l=n({action:a,state:t,decision:o});if(!("payload"in a&&"object"==typeof a.payload&&null!==a.payload&&"checkExperiment"in a.payload))return l;let s=p(e,a.payload.checkExperiment)?.stateOverride||{};return 0===Object.keys(s).length?l:(0,i.Z)(l,s)}}({ruleId:e.id,baseNextStateFunction:e.getNextState})});var c=a(334536);let m=e=>{if(!e)return!1;let n=e("mweb_feature_upsell_copy_visual_combination_v1");return["enabled_copy_1","enabled_copy_2","enabled_tone_filter_1","enabled_tone_filter_2","enabled_visual_search_1","enabled_visual_search_2","enabled_create_board_1","enabled_create_board_2"].some(e=>n.group===e)},g={shouldShowCloseupNavigationalModal:_({id:"closeup_navigational_modal_trigger",evaluate:({pinViewCount:e,navigationalPagesUpsellSeen:n})=>(e??0)>=4&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_1",container:"closeup",reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowSaveModal:_({id:"save_modal_trigger",evaluate:()=>!0,getNextState:({action:e,state:n})=>({...n,pinSaveCount:n.pinSaveCount+1,pinId:e.payload.pinId,attributionLabel:e.payload.attributionLabel,showSaveModal:!0,modal:{isShown:!0,displayProps:{attributionLabel:e.payload.attributionLabel,container:"save",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",savePinId:e.payload.pinId,signupFlow:{type:"signup"},source:"saveButtonExp"}}})}),shouldShowNavigationalModal:_({id:"desktop_navigational_modal_trigger",evaluate:({uniqueNavigationalPagesSeen:e=[],navigationalPagesUpsellSeen:n,navigationalPagesViewThresholdDesktop:a})=>e.length>=(a??4)&&!n,getNextState:({state:e,action:n})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_${n.payload.containerPage}`,container:n.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowSignupModalOnCloseUpClick:_({id:"closeup_modal_trigger",evaluate:({modal:e,clickCloseUp:n})=>!e?.isShown&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickCloseUp:!0})}),shouldShowSignupModalOnClickContextMenuSaveButton:_({id:"context_menu_save_button_trigger",evaluate:({modal:e,clickContextMenuSaveButton:n})=>!e?.isShown&&!n,getNextState:({action:e,state:n})=>{let a;return a=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...n,modal:{isShown:!0,displayProps:a},clickContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnClickCloseupSaveButton:_({id:"closeup_save_button_trigger",evaluate:({modal:e,clickCloseUpContextMenuSaveButton:n})=>!e?.isShown&&!n,getNextState:({action:e,state:n})=>{let a;return a=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...n,modal:{isShown:!0,displayProps:a},clickCloseUpContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnContextMenuDownloadClick:_({id:"desktop_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:n,modal:a})=>!!((e||n)&&!a?.isShown),getNextState:({action:e,state:n})=>{let a;return a=e.payload.inDwebSwapDownloadUpsellExp?{signupFlow:{type:"login"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"lopDownloadUpsell",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"lopDownloadUpsell"}:{signupFlow:{type:"signup"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId},{...n,modal:{isShown:!0,displayProps:a},clickContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnCloseupDownloadClick:_({id:"closeup_download_button_trigger",evaluate:({limitReached:e,modal:n})=>!!(e&&!n?.isShown),getNextState:({action:e,state:n})=>({...n,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId}},clickCloseUpContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource})}),shouldShowSignupModalOnFollowButtonClick:_({id:"follow_button_trigger",evaluate:({modal:e,clickFollowButton:n})=>!e?.isShown&&!n,getNextState:({action:e,state:n})=>({...n,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",container:e.payload.isContextualFollowEnabled?"follow":"",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:e.payload.isContextualFollowEnabled?"followButton":void 0}},clickFollowButton:!0})}),shouldShowSignupModalOnFollowingButtonClick:_({id:"following_button_trigger",evaluate:({modal:e,clickFollowingButton:n})=>!e?.isShown&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_following",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowingButton:!0})}),shouldShowSignupModalOnFollowersButtonClick:_({id:"followers_button_trigger",evaluate:({modal:e,clickFollowersButton:n})=>!e?.isShown&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_followers",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowersButton:!0})}),shouldShowLoginModalOnCommentComposerClick:_({id:"comment_composer_trigger",evaluate:({modal:e,clickCommentComposerUpsell:n})=>!e?.isShown&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"tap_unauth_comment_composer",container:"closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"commentComposer"}},clickCommentComposerUpsell:!0})}),shouldShowLoginModalOnRelatedPinOpenLinkClick:_({id:"related_pin_open_link_trigger",evaluate:({modal:e,clickRelatedPinOpenLinkUpsell:n})=>!e?.isShown&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"click_context_menu_related_pin_right_click_open_link_button",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickRelatedPinOpenLinkUpsell:!0})}),shouldShowLoginModalOnPinLinkClick:_({id:"pin_link_trigger",evaluate:({modal:e,pinLinkClickCount:n=0})=>!e?.isShown&&(2===n||n%5==0),getNextState:({action:e,state:n})=>({...n,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"pinLinkClickHandler_tier1",container:"hybrid_clickthrough",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickPinLinkCount:e.payload.count})}),shouldShowSocialPinLandingModal:_({id:"social_pin_landing_modal_trigger",evaluate:({inviter:e,socialPinLandingModalShown:n,checkExperiment:a})=>!!e&&!n&&!!(a?.("ce_dweb_unauth_splp_blocking").anyEnabled||a?.("ce_dweb_unauth_splp_blocking_12s").anyEnabled),getNextState:({action:e,state:n})=>({...n,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.type===c.Fy?`delay_${e.payload.containerPage}`:`scroll_${e.payload.containerPage}`,container:e.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},socialPinLandingModalShown:!0})})},S={shouldAllowUnauthSave:_({id:"mobile_unauth_save_quota_check",evaluate:({isPPMAndroidUnauthExperience:e,isFromUnauthContextMenu:n,currentUnauthSaves:a=0,mobileUnauthSaveThreshold:t})=>!n&&!e&&a<(t??2),getNextState:({action:e,state:n})=>({...n,mWebSignupModal:{...n.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(n.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:n.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:e.payload.headingType,trigger:{attributionLabel:"extended_save_out_of_quota"===e.payload.headingType?"click_save_button_with_max_unauth_saves":e.payload.attributionLabel||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageNavigationalModal:_({id:"mobile_main_pin_image_modal",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:n,isModalCurrentlyShown:a,learningUpsellScenario:t,forceShowModal:o})=>{let i=t&&n&&!a&&(e?.("mweb_unauth_main_learning_pin_full_page").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced_row").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency_row").anyEnabled||e?.("mweb_q2_mau_push_pc_eu_safe").anyEnabled);return t&&(o||!!i)},getNextState:({action:e,state:n})=>({...n,mWebSignupModal:{...n.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(n.mWebSignupModal?.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:n.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:"none",trigger:{attributionLabel:"navigation_main_pin_image_click",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageAppUpsell:{id:"mobile_main_pin_app_upsell_purple_banner",getNextState:({state:e})=>e,evaluate:({learningUpsellScenario:e,hasConversionUpsell:n,isLearningAppUpsellShown:a})=>n||!e?{shouldToggleAppUpsell:!1,currentlyShowing:!1,newState:!1}:{shouldToggleAppUpsell:!0,currentlyShowing:a,newState:!a}},shouldShowNavigationUpsell:_({id:"mobile_navigation_upsell",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:n,newLocation:a,isNavigationFromSwipe:t,currentNavigationCount:o,hasSeenModal:i,pageThreshold:l,isWashDismissible:s,canShowSignupModalOnRouteChange:r,navigationalPagesViewThresholdMobile:d,checkExperiment:u})=>{let p=d||l||4;return n?{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1}:e&&!t&&a&&r?.(a)?!((o??0)>=p)||i?{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0}:{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_${p}_${o}`,allowCloseOnOutsideClick:s,headingType:m(u)?"mweb_feature_upsell_copy_visual_combination_v1":"none"}:{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1}},getNextState:({state:e,decision:n})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:n?.headingType??"none",trigger:{attributionLabel:n?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!n?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowOnLandUpsell:_({id:"mobile_on_land_upsell",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:n,hasSeenNavUpsell:a,location:i,userAgent:l,showUnauthMwebSocialDefaultModalUpsell:s,isSocialInAppBrowser:r,shouldTriggerOnLand:d=!1})=>{let u;if(!n||a||!(i&&((0,t.L6)(i)||(0,t.am)(i)||(0,o.Z)(i)||(0,t.En)(i)||(0,t.ey)(i))))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let p=!(r?.(l)&&e?.("mweb_unauth_social_iab_upsell_boost_experiment",{dangerouslySkipActivation:!0}).anyEnabled)&&s;if(!s&&!d)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let _=!p&&m(e);if("social"==(u=p?"social":_?"mweb_feature_upsell_copy_visual_combination_v1":"none")&&e){let n=e("ce_mweb_visual_plp_upsell");if(n.anyEnabled)switch(n.group){case"enabled_1":u="social_visual_1";break;case"enabled_2":u="social_visual_2";break;case"enabled_3":u="social_visual_3"}}return{shouldShowModal:!0,shouldIncrementCount:!0,showUnauthMwebSocialUpsell:p,modalConfig:{reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation_0",navigationTriggeredUpsell:{newLocation:i,oldLocation:i},headingType:u}}},getNextState:({state:e,decision:n})=>{let{modalConfig:a}=n;return{...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType,trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:null}}}}}),shouldShowSignupModalOnContextMenuDownloadClick:_({id:"mobile_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:n,modal:a})=>(e||n)&&!a?.isShown,getNextState:({action:e,state:n})=>{let{inMwebDownloadCTAExp:a,showDownloadCloseupIcon:t,attributionLabelSource:o}=e.payload,i={trigger:{attributionLabel:`click_${o}_download_button`,reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},headingType:a||t?"download_limit_reached":"none"};return{...n,mWebSignupModal:{...n.mWebSignupModal,modal:{isShown:!0,displayProps:i,pinId:e.payload.pinId??""}}}}}),shouldShowSignupModalOnFollowButtonClickMobile:_({id:"follow_button_trigger_mobile",evaluate:({mWebSignupModal:e})=>!e?.modal.isShown,getNextState:({action:e,state:n})=>({...n,mWebSignupModal:{...n.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(n.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:n.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:e.payload.isContextualFollowEnabled?"follow":"none",trigger:{attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0}}}})})},h={desktop:g,mobile:S}},334536:function(e,n,a){a.d(n,{dn:()=>U,UA:()=>B,ub:()=>J,Ik:()=>E,mV:()=>f,OU:()=>p,Gh:()=>g,LL:()=>eu,Li:()=>ea,jB:()=>Q,G5:()=>es,CC:()=>ex,F8:()=>eS,Ue:()=>D,t:()=>eD,h4:()=>G,g_:()=>H,BF:()=>et,rA:()=>O,aj:()=>eN,IS:()=>eU,it:()=>P,Yr:()=>x,Vi:()=>k,by:()=>h,wK:()=>V,K7:()=>m,GY:()=>eb,vY:()=>en,yC:()=>eT,HK:()=>b,f$:()=>$,qs:()=>q,Fy:()=>R,QG:()=>ep,CH:()=>eP,WE:()=>em,qT:()=>w,Dk:()=>ee,Bh:()=>W,qq:()=>eR,$S:()=>y,Qm:()=>eC,Lu:()=>Y,Pp:()=>I,Sy:()=>j,b9:()=>er,z1:()=>X,$y:()=>u,Zr:()=>T,sg:()=>Z,Hm:()=>ed,FV:()=>e_,o9:()=>eL,MZ:()=>eA,V9:()=>F,AS:()=>c,kd:()=>C,pp:()=>_,QA:()=>el,tW:()=>eg,v2:()=>eh,Jw:()=>ek,w$:()=>z,Pu:()=>ef,gU:()=>eF,dL:()=>ei,P9:()=>v,YT:()=>eM,pZ:()=>eE,XE:()=>ev,Ff:()=>eI,tA:()=>A,TQ:()=>K,gH:()=>N,aJ:()=>M,C5:()=>eo,Dw:()=>eG,Aw:()=>eO,xY:()=>ec,Bi:()=>L,ap:()=>ew,ht:()=>ey,mX:()=>S});var t=a(716022),o=a(941404),i=a(838135),l=a(209644);let s=e=>{let{modal:n,mWebSignupModal:a,appUpsells:t}=e;return!!(n.isShown||a.modal.isShown||t.learningUpsell?.isShown||t.iabAppUpsell?.isShown)};var r=a(127696),d=a(603316);let u="PROCESS_MOBILE_NAVIGATION_CHANGE",p="SET_UPSELL_REASON",_="UPS_EVENT_PIN_VIEW",c="UPS_EVENT_PIN_SAVE",m="UPS_EVENT_DESKTOP_MODAL_SHOW",g="UPS_EVENT_DESKTOP_MODAL_DISMISSED",S="CLICK_CLOSE_UP_CONTEXT_MENU_SAVE_BUTTON",h="CLICK_CLOSE_UP_CONTEXT_MENU_DOWNLOAD_BUTTON",w="TRIGGER_SCROLL_DOWN_UPSELL",b="CLEAR_SCROLL_DOWN_UPSELL",y="CLICK_CLOSEUP_UPSELL",v="CLICK_CONTEXT_MENU_SAVE_BUTTON_UPSELL",I="CLICK_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",L="CLICK_FOLLOW_BUTTON_UPSELL",E="CLICK_FOLLOWING_BUTTON_UPSELL",O="CLICK_FOLLOWERS_BUTTON_UPSELL",C="CLICK_COMMENT_COMPOSER_UPSELL",T="CLICK_PIN_LINK_UPSELL",P="CLICK_RELATED_PIN_OPEN_LINK_UPSELL",N="RECORD_NAVIGATIONAL_PAGE",f="SET_INITIAL_SESSION_CONTEXT",U="RESET_UPSELL_TRIGGER_STATE",M="RECORD_SOCIAL_PIN_LANDING_PAGE",R="TRIGGER_SOCIAL_DELAY_MODAL",k="TRIGGER_SOCIAL_SCROLL_MODAL",x="SHOW_MOBILE_SIGNUP_MODAL",A="DISMISS_MOBILE_SIGNUP_MODAL",G="SET_MOBILE_SIGNUP_MODAL_TOP_INTEREST",D="INCREMENT_UPSELL_ELIGIBLE_NAVIGATION_COUNT",F="HIDE_UNAUTH_SHARING_MODALS",B="SHOW_UNAUTH_SHARING_MODALS",W="RESTORE_FROM_LOCAL_STORAGE",H="MAIN_PIN_IMAGE_CLICK_MOBILE",q="ON_LAND_UPSELL_MOBILE",$="SET_LEARNING_UPSELL_VISIBILITY",V="CLICK_MOBILE_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",K="DISMISS_MOBILE_FLOATING_UPSELL",Z="CLICK_FOLLOW_BUTTON_UPSELL_MOBILE",Q="INCREMENT_PIN_SAVE_COUNT",Y="DECREMENT_PIN_SAVE_COUNT",X="INCREMENT_UNAUTH_CLICKTHROUGH_COUNT",j="SET_UNAUTH_DOWNLOAD_COUNT",J="UPS_EVENT_PIN_SAVE_MOBILE",z="SET_REFERRED_APP_UPSELL_STATE",ee=e=>({type:W,payload:{upsellEligibleNavigationCount:e}}),en=e=>({type:p,payload:{upsellReason:e}}),ea=(e,n)=>({type:_,payload:{pinId:e,seoUrl:n}}),et=(e,n)=>({type:c,payload:{pinId:e,attributionLabel:n}}),eo=()=>({type:g}),ei=e=>({type:m,payload:{displayProps:e}}),el=()=>({type:y}),es=(e,n,a)=>({type:v,payload:{pinId:e,attributionLabelSource:n,signupToLoginExpGroup:a}}),er=(e,n)=>({type:L,payload:{isIdeaPin:e,isContextualFollowEnabled:n}}),ed=(e,n,a,t)=>({type:S,payload:{pinId:e,attributionLabelSource:n,signupToLoginExpGroup:a,checkExperiment:t}}),eu=({pinId:e,attributionLabelSource:n,downloadAllowedCallback:a})=>({checkExperiment:t,sessionContext:i})=>(i,l)=>{let d=l(),{limitReached:u,oldCount:p,newCount:_}=(0,r.H)(t,{reduxUnauthDownloadCount:d.upsell.unauthDownloadCount,dispatch:i});(0,o.My)("dweb.unauth.context_menu.download_image",{attributionLabelSource:n,limitReached:u,oldCount:p,newCount:_}),i({type:h,payload:{pinId:e,attributionLabelSource:n,limitReached:u,checkExperiment:t}}),s(l().upsell)||a()},ep=({pinId:e,attributionLabelSource:n,inImmediateUpsellGroup:a,inDwebSwapDownloadUpsellExp:t,downloadAllowedCallback:i,showDownloadIconForRelatedPins:l,inDwebDownloadCTAExp:d})=>({checkExperiment:u,sessionContext:p})=>(p,_)=>{let c=_(),{limitReached:m,oldCount:g,newCount:S}=(0,r.H)(u,{reduxUnauthDownloadCount:c.upsell.unauthDownloadCount,dispatch:p});l?(0,o.My)("dweb.unauth.action_bar.download_image",{attributionLabelSource:n,limitReached:m,oldCount:g,newCount:S}):d?(0,o.My)("dweb.unauth.download_cta.download_image",{attributionLabelSource:n}):t?(0,o.My)("dweb.unauth.swap_download_upsell.download_image",{attributionLabelSource:n}):(0,o.My)("dweb.unauth.context_menu.download_image",{attributionLabelSource:n,limitReached:m,oldCount:g,newCount:S}),p({type:I,payload:{pinId:e,attributionLabelSource:n,limitReached:m,inImmediateUpsellGroup:a,inDwebSwapDownloadUpsellExp:t,checkExperiment:u}}),s(_().upsell)||i()},e_=()=>({type:E}),ec=()=>({type:O}),em=()=>({type:C}),eg=e=>({type:T,payload:{count:e}}),eS=()=>({type:P}),eh=(e,n)=>({checkExperiment:a,sessionContext:t})=>o=>{o({type:N,payload:{pageUniqueKey:e,containerPage:n,checkExperiment:a,sessionContext:t}})},ew=e=>({type:f,payload:{sessionContext:e}}),eb=(e,n)=>({type:M,payload:{inviter:e,containerPage:n}}),ey=e=>({checkExperiment:n})=>a=>{a({type:R,payload:{containerPage:e,checkExperiment:n}})},ev=e=>({checkExperiment:n})=>a=>{a({type:k,payload:{containerPage:e,checkExperiment:n}})},eI=e=>({type:x,payload:e}),eL=()=>({type:A}),eE=e=>({type:G,payload:{topInterest:e}}),eO=()=>({type:D}),eC=()=>({type:F}),eT=()=>({type:B}),eP=e=>({checkExperiment:n,sessionContext:a})=>(t,i)=>{t({type:u,payload:{...e,checkExperiment:n,sessionContext:a}}),s(i().upsell)||(0,o.My)(`mweb.nav.upsell.show.${e.currentNavigationCount}`)},eN=e=>({checkExperiment:n,sessionContext:a})=>(s,r)=>{let u=r().upsell,{country:p,userAgent:_}=a,c=l.YM.mobile.shouldShowOnLandUpsell?.evaluate({checkExperiment:n,isUpsellEnabledGlobally:(0,i.e_)({isModalShown:u.mWebSignupModal.modal.isShown??!1,isUnauthSharingModalsShown:u.mWebSignupModal.isUnauthSharingModalsShown??!1,modalHasShown:!!u.mWebSignupModal.modalHasShown,country:p,userAgent:_}),hasSeenNavUpsell:u.mWebSignupModal.modalHasShown,location:e.location,isPaid:e.isPaid,isSocial:e.isSocial,isDirect:e.isDirect,isSEO:e.isSEO,userAgent:_,showUnauthMwebSocialDefaultModalUpsell:e.showUnauthMwebSocialDefaultModalUpsell,isSocialInAppBrowser:t.ry,session:a});c.shouldShowModal&&c.modalConfig&&((0,o.My)("mweb.nav.upsell.show.0"),c.showUnauthMwebSocialUpsell&&(0,d.nP)("unauth.mweb.social.pin.upsell",{sampleRate:1}),s({type:q,payload:{decision:c,checkExperiment:n}}))},ef=e=>({checkExperiment:n,sessionContext:a})=>(t,i)=>{let s=i().upsell,r=!!s.appUpsells.learningUpsell?.isShown,d=l.YM.mobile.shouldShowMainPinImageNavigationalModal?.evaluate({checkExperiment:n,session:a,isUpsellEnabledGlobally:e.upsellContext.isUpsellEnabledGlobally(),isModalCurrentlyShown:e.upsellContext.isModalShown,learningUpsellScenario:e.learningUpsellScenario}),u=l.YM.mobile.shouldShowMainPinImageAppUpsell?.evaluate({learningUpsellScenario:e.learningUpsellScenario,hasConversionUpsell:!!d,isLearningAppUpsellShown:r});d?(0,o.My)("mweb.nav.upsell.show.main_pin_image_click"):u.shouldToggleAppUpsell?u.currentlyShowing?e.trackInteraction({action:"dismiss",item:"learning-upsell"}):e.trackInteraction({action:"click",item:"learning-upsell"}):e.onImageClick(),t({type:H,payload:{conversionDecision:d,appUpsellDecision:u,checkExperiment:n,pinId:e.pinId}})},eU=e=>({type:$,payload:{isShown:e}}),eM=({pinId:e,attributionLabelSource:n,inImmediateUpsellGroup:a,inMwebDownloadCTAExp:t,showDownloadCloseupIcon:i,downloadAllowedCallback:l})=>({checkExperiment:d,sessionContext:u})=>(u,p)=>{let _=p(),{limitReached:c,oldCount:m,newCount:g}=(0,r.H)(d,{reduxUnauthDownloadCount:_.upsell.unauthDownloadCount,dispatch:u});t?(0,o.My)("mweb.unauth.download_cta.download_image",{attributionLabelSource:n}):i?(0,o.My)("mweb.unauth.download_closeup_icon.download_image",{attributionLabelSource:n}):(0,o.My)("mweb.unauth.context_menu.download_image",{attributionLabelSource:n,limitReached:c,oldCount:m,newCount:g}),u({type:V,payload:{pinId:e,attributionLabelSource:n,limitReached:c,inImmediateUpsellGroup:a,inMwebDownloadCTAExp:t,showDownloadCloseupIcon:i,checkExperiment:d}}),s(p().upsell)||l()},eR=()=>({type:K}),ek=(e,n)=>({type:Z,payload:{isIdeaPin:e,isContextualFollowEnabled:n}}),ex=()=>({type:Y}),eA=()=>({type:X}),eG=e=>({type:j,payload:{count:e}}),eD=e=>({checkExperiment:n,sessionContext:a})=>(a,t)=>{let o=t().upsell;l.YM.mobile.shouldAllowUnauthSave?.evaluate({checkExperiment:n,isPPMAndroidUnauthExperience:e.isPPMAndroidUnauthExperience,isFromUnauthContextMenu:e.isFromUnauthContextMenu,currentUnauthSaves:e.currentUnauthSaves})&&!o.mWebSignupModal.modal.isShown?(e.unauthSavedPinsStore.save({id:e.pinId,nodeId:e.nodeId,imageUrl:e.getPinGifOrImageSrc({imagesUrls:e.imagesUrls,embedSrc:e.embedSrc,embedType:e.embedType,excludeOriginals:!e.isBot&&!e.isSocialBot})}),a({type:Q}),e.setNumUnauthSavedPins(e.numUnauthSavedPins+1),e.handleShowNavFooter(a,e.forceShowNavFooter,e.isNavBarHidden,e.setForceShowNavFooter),e.successCallback&&e.successCallback()):a({type:J,payload:{attributionLabel:e.isFromUnauthContextMenu?e.attributionLabel||"click_save_button_on_closeup":"click_save_button_with_max_unauth_saves",headingType:e.isFromUnauthContextMenu?"save":"extended_save_out_of_quota",pinId:e.pinId,checkExperiment:n}})},eF=({isShown:e,appUpsellType:n,isBlocking:a})=>({type:z,payload:{isShown:e,appUpsellType:n,isBlocking:a}})},994174:function(e,n,a){a.d(n,{T9:()=>l});var t=a(716022),o=a(942230),i=a(501971);let l=(e,n,a)=>{let l=e?.countryFromHostName||e?.country||"",s=e?.userAgent?.raw||("undefined"!=typeof navigator?navigator.userAgent:"");return{country:l,userAgent:s,referrer:e?.referrerFromHeader||e?.referrerFromCookie||"",unauthID:e?.unauthId||"",region:l?(0,o.Z)(l.toUpperCase()):"OTHER",channel:n.isPaid?"paid":n.isInvite?"invite":n.isSocial?"social":n.isSEO?"seo":n.utmSource?`utm_${n.utmSource}`:"direct",iab:s&&"string"==typeof s?(0,t.$K)(s)?"pinterest":(0,t.dh)(s)?"instagram":/wechat|micromessenger/i.test(s)?"wechat":(0,t.ry)(s)||/facebook|fbav|fban|tiktok|twitter|line/i.test(s)?"social":"none":"none",deviceType:a,revisitationState:(0,i.iU)()}}},127696:function(e,n,a){a.d(n,{H:()=>r,Z:()=>s});var t=a(111330),o=a(753143),i=a(941404),l=a(334536);async function s({filename:e,imgSrc:n,imageDownloadSuccessCallback:a,category:t,pinId:o,viewParameter:l,viewType:s,isUnauth:r=!1,platform:d="web",expName:u,expGroup:p},_){return"undefined"==typeof window?Promise.resolve():((0,i.My)("web.download.click",{category:t||"no_category",authType:r?"unauth":"auth",platform:d,viewType:s,expName:u,expGroup:p}),_({event_type:82,object_id_str:o,view_type:s||3,view_parameter:l||139}),n&&document)?fetch(n,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then(e=>e.blob()).then(n=>{let o=document.createElement("a");o.href=window.URL.createObjectURL(n),o.setAttribute("download",e&&e.replace(".","_")),o.style.display="none",document.body?.appendChild(o),o.click(),document.body?.removeChild(o),(0,i.My)("web.download.success",{category:t||"no_category",authType:r?"unauth":"auth",platform:d,viewType:s,expName:u,expGroup:p}),a?.()}).catch(()=>{throw(0,i.My)("web.download.failure",{category:t||"no_category",authType:r?"unauth":"auth",platform:d,viewType:s,expName:u,expGroup:p}),Error("Download image error")}):Promise.resolve()}let r=(e,n)=>{let{reduxUnauthDownloadCount:a=0,dispatch:i}=n||{},s=(0,o.M0)();if(e("unuath_download_paywalled").anyEnabled||e("unauth_combined_download_exp").anyEnabled)return{limitReached:!0,oldCount:0,newCount:0};if(!s.accessAllowed){let e=a>=0,n=e?a:a+1;return a!==n&&i&&i((0,l.Dw)(n)),{limitReached:e,oldCount:a,newCount:n}}let r=s.getItem(t.rN)||0,d=r>=1,u=d?r:r+1;return r!==u&&(0,o.M0)().setItem(t.rN,u),{limitReached:d,oldCount:r,newCount:u}}},370347:function(e,n,a){a.d(n,{Yg:()=>r,ib:()=>u,nF:()=>_,xX:()=>p});var t=a(675973),o=a(15667),i=a(647709),l=a(603316);let s=({checkExperiment:e})=>{let{group:n}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,a)=>(0,l.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:n,...a}})}},r=()=>{let{isAuthenticated:e}=(0,o.B)(),n=(0,i.HG)(),{checkExperiment:a}=(0,t.Z)();return e&&!n?s({checkExperiment:a}):{logStat:()=>{}}},d=0,u=({checkExperiment:e,isAuthMweb:n})=>{if(!n)return;let{logStat:a}=s({checkExperiment:e});(d+=1)<10&&a(`repin_${d}`)};function p({checkExperiment:e,isDesktop:n,isAuthenticated:a}){if(!a)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0};if(n){let{anyEnabled:n}=e("auth_dweb_graphql_pin_page");return{isGraphQLEnabledForRelatedPins:n,isGraphQLEnabledInGeneral:n}}{let{anyEnabled:n,group:a}=e("auth_mweb_graphql_pin_page");switch(a){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0};case"only_closeup":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!1};case"only_related_pins":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0};default:return{isGraphQLEnabledInGeneral:n,isGraphQLEnabledForRelatedPins:n}}}}function _(){let{checkExperiment:e}=(0,t.Z)(),n=(0,i.HG)(),{isAuthenticated:a}=(0,o.B)();return p({checkExperiment:e,isDesktop:n,isAuthenticated:a})}},787995:function(e,n,a){a.d(n,{Z:()=>t});let t=function(e){return{...e,ts:Date.now()}}},501971:function(e,n,a){a.d(n,{K7:()=>s,Vd:()=>d,WT:()=>l,iU:()=>r});var t=a(111330),o=a(753143),i=a(787995);let l=18e5,s=()=>({count:1,time:0,ts:Date.now()}),r=()=>{try{let{count:e,time:n,ts:a}=(0,o.M0)().getItem(t.SI)??{};if("number"==typeof e&&"number"==typeof n&&"number"==typeof a)return{count:e,time:n,ts:a};throw Error("Invalid revisitation data")}catch(e){return s()}},d=e=>{(0,o.M0)().setItem(t.SI,(0,i.Z)(e))}},113850:function(e,n,a){a.d(n,{C:()=>l,P:()=>i});var t=a(506662),o=a(603316);let i=()=>!1,l=e=>{(0,t.LM)(e)&&!i()&&(0,o.nP)("mobile_signup_modal.rules.suppress_for_discover_article",{flushImmediate:!0,sampleRate:1})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/61239-6dd5b091051c6fc1.mjs.map